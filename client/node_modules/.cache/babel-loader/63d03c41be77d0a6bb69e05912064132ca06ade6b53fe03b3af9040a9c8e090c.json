{"ast":null,"code":"var _jsxFileName = \"D:\\\\nkurs\\\\client\\\\src\\\\components\\\\SearchBar.js\",\n  _s = $RefreshSig$();\n// components/SearchBar.js\nimport React, { useState, useContext, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport '../css/components/SearchBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchBar = _s(observer(_c = _s(() => {\n  var _categories$find;\n  _s();\n  const {\n    product\n  } = useContext(Context);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [characteristics, setCharacteristics] = useState([]);\n  const [filters, setFilters] = useState({\n    minPrice: '',\n    maxPrice: '',\n    sortBy: 'newest',\n    categoryId: '',\n    characteristics: {}\n  });\n  const [errors, setErrors] = useState({});\n\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π\n  const loadCategories = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/prod/types');\n      if (response.ok) {\n        const data = await response.json();\n        setCategories(data);\n      }\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', error);\n    }\n  };\n\n  // –ó–∞–≥—Ä—É–∑–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n  useEffect(() => {\n    if (filters.categoryId) {\n      loadCharacteristics(filters.categoryId);\n    } else {\n      setCharacteristics([]);\n      setFilters(prev => ({\n        ...prev,\n        characteristics: {}\n      }));\n    }\n  }, [filters.categoryId]);\n  const loadCharacteristics = async categoryId => {\n    try {\n      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á—Ç–æ–±—ã –∏–∑–≤–ª–µ—á—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\n      const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\n      if (response.ok) {\n        const data = await response.json();\n        const products = data.rows || data;\n\n        // –ò–∑–≤–ª–µ–∫–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\n        const uniqueCharacteristics = {};\n        products.forEach(product => {\n          if (product.info && Array.isArray(product.info)) {\n            product.info.forEach(info => {\n              if (!uniqueCharacteristics[info.title]) {\n                uniqueCharacteristics[info.title] = new Set();\n              }\n              uniqueCharacteristics[info.title].add(info.description);\n            });\n          }\n        });\n\n        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n        const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\n          title,\n          values: Array.from(values)\n        }));\n        setCharacteristics(charArray);\n      }\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫:', error);\n    }\n  };\n\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n  const validateFilters = () => {\n    const newErrors = {};\n    if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\n      newErrors.minPrice = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º';\n    }\n    if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\n      newErrors.maxPrice = '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º';\n    }\n    if (filters.minPrice && filters.maxPrice) {\n      const min = parseFloat(filters.minPrice);\n      const max = parseFloat(filters.maxPrice);\n      if (min > max) {\n        newErrors.priceRange = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π';\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchQuery.trim()) {\n      await product.clearSearch();\n      return;\n    }\n    if (!validateFilters()) {\n      return;\n    }\n    setIsSearching(true);\n    try {\n      await product.searchProducts(searchQuery.trim(), filters);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–∞:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–∏—Å–∫–∞\n  const clearSearch = async () => {\n    setSearchQuery('');\n    setFilters({\n      minPrice: '',\n      maxPrice: '',\n      sortBy: 'newest',\n      categoryId: '',\n      characteristics: {}\n    });\n    setErrors({});\n    await product.clearSearch();\n  };\n\n  // –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤\n  const clearFilters = async () => {\n    setFilters({\n      minPrice: '',\n      maxPrice: '',\n      sortBy: 'newest',\n      categoryId: '',\n      characteristics: {}\n    });\n    setErrors({});\n    setCharacteristics([]);\n    await product.fetchProducts();\n  };\n\n  // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–∫–∏\n  const clearError = fieldName => {\n    setErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[fieldName];\n      return newErrors;\n    });\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearch(e);\n    }\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n  const handleFilterChange = (filterType, value) => {\n    const newFilters = {\n      ...filters,\n      [filterType]: value\n    };\n    setFilters(newFilters);\n    if (errors[filterType]) {\n      clearError(filterType);\n    }\n    if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\n      clearError('priceRange');\n    }\n    if (validateFilters()) {\n      if (searchQuery.trim()) {\n        product.searchProducts(searchQuery.trim(), newFilters);\n      } else {\n        product.fetchProducts(newFilters);\n      }\n    }\n  };\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫\n  const handleCharacteristicChange = (charTitle, charValue, checked) => {\n    const newCharacteristics = {\n      ...filters.characteristics\n    };\n    if (checked) {\n      if (!newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = [];\n      }\n      newCharacteristics[charTitle].push(charValue);\n    } else {\n      if (newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\n        if (newCharacteristics[charTitle].length === 0) {\n          delete newCharacteristics[charTitle];\n        }\n      }\n    }\n    const newFilters = {\n      ...filters,\n      characteristics: newCharacteristics\n    };\n    setFilters(newFilters);\n    if (validateFilters()) {\n      if (searchQuery.trim()) {\n        product.searchProducts(searchQuery.trim(), newFilters);\n      } else {\n        product.fetchProducts(newFilters);\n      }\n    }\n  };\n\n  // –û—á–∏—Å—Ç–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\n  const clearCharacteristic = charTitle => {\n    const newCharacteristics = {\n      ...filters.characteristics\n    };\n    delete newCharacteristics[charTitle];\n    const newFilters = {\n      ...filters,\n      characteristics: newCharacteristics\n    };\n    setFilters(newFilters);\n    if (validateFilters()) {\n      if (searchQuery.trim()) {\n        product.searchProducts(searchQuery.trim(), newFilters);\n      } else {\n        product.fetchProducts(newFilters);\n      }\n    }\n  };\n\n  // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã\n  const applyFilters = async () => {\n    if (!validateFilters()) {\n      return;\n    }\n    if (searchQuery.trim()) {\n      await product.searchProducts(searchQuery.trim(), filters);\n    } else {\n      await product.fetchProducts(filters);\n    }\n  };\n  const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || filters.categoryId || Object.keys(filters.characteristics).length > 0;\n  const hasActiveCharacteristics = Object.keys(filters.characteristics).length > 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-bar-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"search-title\",\n        children: product.selectedCity ? `–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ ${product.selectedCity}` : '–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-subtitle\",\n        children: product.selectedCity ? `–ò—â–∏—Ç–µ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ —Ü–µ–Ω–µ` : '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      className: \"search-form\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-icon\",\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: product.selectedCity ? `–ü–æ–∏—Å–∫ –≤ ${product.selectedCity}...` : '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...',\n          className: \"search-input\",\n          disabled: isSearching || !product.selectedCity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 21\n        }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: clearSearch,\n          className: \"clear-search-button\",\n          disabled: isSearching,\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"search-button\",\n          disabled: isSearching || !product.selectedCity || !searchQuery.trim(),\n          children: isSearching ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 29\n          }, this) : '–ù–∞–π—Ç–∏'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-toggle-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowFilters(!showFilters),\n        className: \"filters-toggle-button\",\n        children: showFilters ? '‚ñ≤ –°–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã' : '‚ñº –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearFilters,\n        className: \"clear-filters-button\",\n        children: \"\\u2715 \\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"filters-title\",\n          children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B \\u0438 \\u0441\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 25\n        }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearFilters,\n          className: \"clear-filters-button\",\n          children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 21\n      }, this), errors.priceRange && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-error general-error\",\n        children: [\"\\u26A0\\uFE0F \", errors.priceRange]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"filter-label\",\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.categoryId,\n            onChange: e => handleFilterChange('categoryId', e.target.value),\n            className: \"filter-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 33\n            }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category.id,\n              children: category.name\n            }, category.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 37\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"filter-label\",\n            children: \"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0446\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.minPrice,\n              onChange: e => handleFilterChange('minPrice', e.target.value),\n              placeholder: \"0\",\n              className: `price-input ${errors.minPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"currency-symbol\",\n              children: \"\\u20BD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 29\n          }, this), errors.minPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-error\",\n            children: [\"\\u26A0\\uFE0F \", errors.minPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"filter-label\",\n            children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0446\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.maxPrice,\n              onChange: e => handleFilterChange('maxPrice', e.target.value),\n              placeholder: \"\\u221E\",\n              className: `price-input ${errors.maxPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"currency-symbol\",\n              children: \"\\u20BD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 29\n          }, this), errors.maxPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-error\",\n            children: [\"\\u26A0\\uFE0F \", errors.maxPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"filter-label\",\n            children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.sortBy,\n            onChange: e => handleFilterChange('sortBy', e.target.value),\n            className: \"filter-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"newest\",\n              children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043D\\u043E\\u0432\\u044B\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price_asc\",\n              children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0432\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\\u0430\\u043D\\u0438\\u044E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price_desc\",\n              children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0443\\u0431\\u044B\\u0432\\u0430\\u043D\\u0438\\u044E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name_asc\",\n              children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u0410-\\u042F)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name_desc\",\n              children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u042F-\\u0410)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 21\n      }, this), characteristics.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"characteristics-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"characteristics-title\",\n          children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"characteristics-grid\",\n          children: characteristics.map(char => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"characteristic-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"characteristic-label\",\n              children: char.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"characteristic-values\",\n              children: char.values.map(value => {\n                var _filters$characterist;\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"characteristic-value\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: ((_filters$characterist = filters.characteristics[char.title]) === null || _filters$characterist === void 0 ? void 0 : _filters$characterist.includes(value)) || false,\n                    onChange: e => handleCharacteristicChange(char.title, value, e.target.checked),\n                    className: \"characteristic-checkbox\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"characteristic-text\",\n                    children: value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 53\n                  }, this)]\n                }, value, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 41\n            }, this)]\n          }, char.title, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-actions-full\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyFilters,\n          className: \"apply-filters-button\",\n          disabled: isSearching || Object.keys(errors).length > 0,\n          children: \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 17\n    }, this), product.hasActiveSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-count\",\n          children: [\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: product.totalCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 38\n          }, this), \" \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-context\",\n          children: [\"\\u0432 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: product.selectedCity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-query\",\n        children: [\"\\u041F\\u043E \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443: \\\"\", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: product.currentSearchQuery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 38\n        }, this), \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 21\n      }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"active-filters\",\n        children: [filters.categoryId && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-filter\",\n          children: [\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F: \", (_categories$find = categories.find(c => c.id == filters.categoryId)) === null || _categories$find === void 0 ? void 0 : _categories$find.name, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleFilterChange('categoryId', ''),\n            className: \"active-filter-remove\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 33\n        }, this), filters.minPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-filter\",\n          children: [\"\\u041E\\u0442 \", filters.minPrice, \"\\u20BD\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleFilterChange('minPrice', ''),\n            className: \"active-filter-remove\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 33\n        }, this), filters.maxPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-filter\",\n          children: [\"\\u0414\\u043E \", filters.maxPrice, \"\\u20BD\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleFilterChange('maxPrice', ''),\n            className: \"active-filter-remove\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 33\n        }, this), filters.sortBy !== 'newest' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-filter\",\n          children: [filters.sortBy === 'price_asc' && '–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã', filters.sortBy === 'price_desc' && '–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã', filters.sortBy === 'name_asc' && '–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)', filters.sortBy === 'name_desc' && '–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)', /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleFilterChange('sortBy', 'newest'),\n            className: \"active-filter-remove\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 33\n        }, this), hasActiveCharacteristics && Object.entries(filters.characteristics).map(([title, values]) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-filter\",\n          children: [title, \": \", values.join(', '), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => clearCharacteristic(title),\n            className: \"active-filter-remove\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 37\n          }, this)]\n        }, title, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 33\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearSearch,\n        className: \"clear-search-link\",\n        children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u043E\\u0438\\u0441\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 17\n    }, this), !product.selectedCity && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-city-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-city-icon\",\n        children: \"\\uD83D\\uDCCD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-city-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434 \\u0432\\u044B\\u0448\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 25\n        }, this), \" \\u0434\\u043B\\u044F \\u043F\\u043E\\u0438\\u0441\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 9\n  }, this);\n}, \"PHaq+AXYDQrAzh+4trQqDopHa20=\")), \"PHaq+AXYDQrAzh+4trQqDopHa20=\");\n_c2 = SearchBar;\nexport default SearchBar;\nvar _c, _c2;\n$RefreshReg$(_c, \"SearchBar$observer\");\n$RefreshReg$(_c2, \"SearchBar\");","map":{"version":3,"names":["React","useState","useContext","useEffect","observer","Context","jsxDEV","_jsxDEV","SearchBar","_s","_c","_categories$find","product","searchQuery","setSearchQuery","isSearching","setIsSearching","showFilters","setShowFilters","categories","setCategories","characteristics","setCharacteristics","filters","setFilters","minPrice","maxPrice","sortBy","categoryId","errors","setErrors","loadCategories","response","fetch","ok","data","json","error","console","loadCharacteristics","prev","products","rows","uniqueCharacteristics","forEach","info","Array","isArray","title","Set","add","description","charArray","Object","entries","map","values","from","validateFilters","newErrors","isNaN","parseFloat","min","max","priceRange","keys","length","handleSearch","e","preventDefault","trim","clearSearch","searchProducts","clearFilters","fetchProducts","clearError","fieldName","handleKeyPress","key","handleFilterChange","filterType","value","newFilters","handleCharacteristicChange","charTitle","charValue","checked","newCharacteristics","push","filter","v","clearCharacteristic","applyFilters","hasActiveFilters","hasActiveCharacteristics","className","children","selectedCity","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","target","onKeyPress","placeholder","disabled","onClick","category","id","name","step","char","_filters$characterist","includes","hasActiveSearch","totalCount","currentSearchQuery","find","c","join","_c2","$RefreshReg$"],"sources":["D:/nkurs/client/src/components/SearchBar.js"],"sourcesContent":["// components/SearchBar.js\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Context } from '../index';\r\nimport '../css/components/SearchBar.css';\r\n\r\nconst SearchBar = observer(() => {\r\n    const { product } = useContext(Context);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [showFilters, setShowFilters] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [characteristics, setCharacteristics] = useState([]);\r\n    const [filters, setFilters] = useState({\r\n        minPrice: '',\r\n        maxPrice: '',\r\n        sortBy: 'newest',\r\n        categoryId: '',\r\n        characteristics: {}\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n\r\n    // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π\r\n    const loadCategories = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/prod/types');\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCategories(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', error);\r\n        }\r\n    };\r\n\r\n    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\r\n    useEffect(() => {\r\n        if (filters.categoryId) {\r\n            loadCharacteristics(filters.categoryId);\r\n        } else {\r\n            setCharacteristics([]);\r\n            setFilters(prev => ({ ...prev, characteristics: {} }));\r\n        }\r\n    }, [filters.categoryId]);\r\n\r\n    const loadCharacteristics = async (categoryId) => {\r\n        try {\r\n            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á—Ç–æ–±—ã –∏–∑–≤–ª–µ—á—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\r\n            const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                const products = data.rows || data;\r\n                \r\n                // –ò–∑–≤–ª–µ–∫–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\r\n                const uniqueCharacteristics = {};\r\n                products.forEach(product => {\r\n                    if (product.info && Array.isArray(product.info)) {\r\n                        product.info.forEach(info => {\r\n                            if (!uniqueCharacteristics[info.title]) {\r\n                                uniqueCharacteristics[info.title] = new Set();\r\n                            }\r\n                            uniqueCharacteristics[info.title].add(info.description);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\r\n                const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\r\n                    title,\r\n                    values: Array.from(values)\r\n                }));\r\n\r\n                setCharacteristics(charArray);\r\n            }\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫:', error);\r\n        }\r\n    };\r\n\r\n// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\r\nconst validateFilters = () => {\r\n    const newErrors = {};\r\n\r\n    if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\r\n        newErrors.minPrice = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º';\r\n    }\r\n\r\n    if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\r\n        newErrors.maxPrice = '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º';\r\n    }\r\n\r\n    if (filters.minPrice && filters.maxPrice) {\r\n        const min = parseFloat(filters.minPrice);\r\n        const max = parseFloat(filters.maxPrice);\r\n        if (min > max) {\r\n            newErrors.priceRange = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π';\r\n        }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n};\r\n\r\n    // –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!searchQuery.trim()) {\r\n            await product.clearSearch();\r\n            return;\r\n        }\r\n\r\n        if (!validateFilters()) {\r\n            return;\r\n        }\r\n\r\n        setIsSearching(true);\r\n        try {\r\n            await product.searchProducts(searchQuery.trim(), filters);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–∞:', error);\r\n        } finally {\r\n            setIsSearching(false);\r\n        }\r\n    };\r\n\r\n    // –û—á–∏—Å—Ç–∫–∞ –ø–æ–∏—Å–∫–∞\r\n    const clearSearch = async () => {\r\n        setSearchQuery('');\r\n        setFilters({\r\n            minPrice: '',\r\n            maxPrice: '',\r\n            sortBy: 'newest',\r\n            categoryId: '',\r\n            characteristics: {}\r\n        });\r\n        setErrors({});\r\n        await product.clearSearch();\r\n    };\r\n\r\n    // –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤\r\n    const clearFilters = async () => {\r\n        setFilters({\r\n            minPrice: '',\r\n            maxPrice: '',\r\n            sortBy: 'newest',\r\n            categoryId: '',\r\n            characteristics: {}\r\n        });\r\n        setErrors({});\r\n        setCharacteristics([]);\r\n        await product.fetchProducts();\r\n    };\r\n\r\n    // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–∫–∏\r\n    const clearError = (fieldName) => {\r\n        setErrors(prev => {\r\n            const newErrors = { ...prev };\r\n            delete newErrors[fieldName];\r\n            return newErrors;\r\n        });\r\n    };\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.key === 'Enter') {\r\n            handleSearch(e);\r\n        }\r\n    };\r\n\r\n    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\r\n    const handleFilterChange = (filterType, value) => {\r\n        const newFilters = {\r\n            ...filters,\r\n            [filterType]: value\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        if (errors[filterType]) {\r\n            clearError(filterType);\r\n        }\r\n        if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\r\n            clearError('priceRange');\r\n        }\r\n\r\n        if (validateFilters()) {\r\n            if (searchQuery.trim()) {\r\n                product.searchProducts(searchQuery.trim(), newFilters);\r\n            } else {\r\n                product.fetchProducts(newFilters);\r\n            }\r\n        }\r\n    };\r\n\r\n    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫\r\n    const handleCharacteristicChange = (charTitle, charValue, checked) => {\r\n        const newCharacteristics = { ...filters.characteristics };\r\n        \r\n        if (checked) {\r\n            if (!newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = [];\r\n            }\r\n            newCharacteristics[charTitle].push(charValue);\r\n        } else {\r\n            if (newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\r\n                if (newCharacteristics[charTitle].length === 0) {\r\n                    delete newCharacteristics[charTitle];\r\n                }\r\n            }\r\n        }\r\n\r\n        const newFilters = {\r\n            ...filters,\r\n            characteristics: newCharacteristics\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        if (validateFilters()) {\r\n            if (searchQuery.trim()) {\r\n                product.searchProducts(searchQuery.trim(), newFilters);\r\n            } else {\r\n                product.fetchProducts(newFilters);\r\n            }\r\n        }\r\n    };\r\n\r\n    // –û—á–∏—Å—Ç–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\r\n    const clearCharacteristic = (charTitle) => {\r\n        const newCharacteristics = { ...filters.characteristics };\r\n        delete newCharacteristics[charTitle];\r\n        \r\n        const newFilters = {\r\n            ...filters,\r\n            characteristics: newCharacteristics\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        if (validateFilters()) {\r\n            if (searchQuery.trim()) {\r\n                product.searchProducts(searchQuery.trim(), newFilters);\r\n            } else {\r\n                product.fetchProducts(newFilters);\r\n            }\r\n        }\r\n    };\r\n\r\n    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã\r\n    const applyFilters = async () => {\r\n        if (!validateFilters()) {\r\n            return;\r\n        }\r\n\r\n        if (searchQuery.trim()) {\r\n            await product.searchProducts(searchQuery.trim(), filters);\r\n        } else {\r\n            await product.fetchProducts(filters);\r\n        }\r\n    };\r\n\r\n    const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || \r\n                            filters.categoryId || Object.keys(filters.characteristics).length > 0;\r\n\r\n    const hasActiveCharacteristics = Object.keys(filters.characteristics).length > 0;\r\n\r\n    return (\r\n        <div className=\"search-bar-container\">\r\n            <div className=\"search-header\">\r\n                <h2 className=\"search-title\">\r\n                    {product.selectedCity \r\n                        ? `–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ ${product.selectedCity}`\r\n                        : '–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤'\r\n                    }\r\n                </h2>\r\n                <div className=\"search-subtitle\">\r\n                    {product.selectedCity \r\n                        ? `–ò—â–∏—Ç–µ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ —Ü–µ–Ω–µ`\r\n                        : '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤'\r\n                    }\r\n                </div>\r\n            </div>\r\n\r\n            <form onSubmit={handleSearch} className=\"search-form\">\r\n                <div className=\"search-input-group\">\r\n                    <div className=\"search-icon\">üîç</div>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        onKeyPress={handleKeyPress}\r\n                        placeholder={\r\n                            product.selectedCity \r\n                                ? `–ü–æ–∏—Å–∫ –≤ ${product.selectedCity}...`\r\n                                : '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...'\r\n                        }\r\n                        className=\"search-input\"\r\n                        disabled={isSearching || !product.selectedCity}\r\n                    />\r\n                    {searchQuery && (\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={clearSearch}\r\n                            className=\"clear-search-button\"\r\n                            disabled={isSearching}\r\n                        >\r\n                            ‚úï\r\n                        </button>\r\n                    )}\r\n                    <button \r\n                        type=\"submit\" \r\n                        className=\"search-button\"\r\n                        disabled={isSearching || !product.selectedCity || !searchQuery.trim()}\r\n                    >\r\n                        {isSearching ? (\r\n                            <div className=\"search-spinner\"></div>\r\n                        ) : (\r\n                            '–ù–∞–π—Ç–∏'\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n\r\n            {/* –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ */}\r\n            <div className=\"filters-toggle-section\">\r\n                <button\r\n                    onClick={() => setShowFilters(!showFilters)}\r\n                    className=\"filters-toggle-button\"\r\n                >\r\n                    {showFilters ? '‚ñ≤ –°–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã' : '‚ñº –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã'}\r\n                </button>\r\n                {hasActiveFilters && (\r\n                    <button\r\n                        onClick={clearFilters}\r\n                        className=\"clear-filters-button\"\r\n                    >\r\n                        ‚úï –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* –°–µ–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ */}\r\n            {showFilters && (\r\n                <div className=\"filters-section\">\r\n                    <div className=\"filters-header\">\r\n                        <h3 className=\"filters-title\">–§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</h3>\r\n                        {hasActiveFilters && (\r\n                            <button\r\n                                onClick={clearFilters}\r\n                                className=\"clear-filters-button\"\r\n                            >\r\n                                –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {errors.priceRange && (\r\n                        <div className=\"filter-error general-error\">\r\n                            ‚ö†Ô∏è {errors.priceRange}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"filters-grid\">\r\n                        {/* –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */}\r\n                        <div className=\"filter-group\">\r\n                            <label className=\"filter-label\">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>\r\n                            <select\r\n                                value={filters.categoryId}\r\n                                onChange={(e) => handleFilterChange('categoryId', e.target.value)}\r\n                                className=\"filter-select\"\r\n                            >\r\n                                <option value=\"\">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>\r\n                                {categories.map(category => (\r\n                                    <option key={category.id} value={category.id}>\r\n                                        {category.name}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* –§–∏–ª—å—Ç—Ä –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ */}\r\n                        <div className=\"filter-group\">\r\n                            <label className=\"filter-label\">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞</label>\r\n                            <div className=\"price-input-group\">\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={filters.minPrice}\r\n                                    onChange={(e) => handleFilterChange('minPrice', e.target.value)}\r\n                                    placeholder=\"0\"\r\n                                    className={`price-input ${errors.minPrice ? 'error' : ''}`}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                />\r\n                                <span className=\"currency-symbol\">‚ÇΩ</span>\r\n                            </div>\r\n                            {errors.minPrice && (\r\n                                <div className=\"filter-error\">‚ö†Ô∏è {errors.minPrice}</div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* –§–∏–ª—å—Ç—Ä –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ */}\r\n                        <div className=\"filter-group\">\r\n                            <label className=\"filter-label\">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞</label>\r\n                            <div className=\"price-input-group\">\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={filters.maxPrice}\r\n                                    onChange={(e) => handleFilterChange('maxPrice', e.target.value)}\r\n                                    placeholder=\"‚àû\"\r\n                                    className={`price-input ${errors.maxPrice ? 'error' : ''}`}\r\n                                    min=\"0\"\r\n                                    step=\"0.01\"\r\n                                />\r\n                                <span className=\"currency-symbol\">‚ÇΩ</span>\r\n                            </div>\r\n                            {errors.maxPrice && (\r\n                                <div className=\"filter-error\">‚ö†Ô∏è {errors.maxPrice}</div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ */}\r\n                        <div className=\"filter-group\">\r\n                            <label className=\"filter-label\">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>\r\n                            <select\r\n                                value={filters.sortBy}\r\n                                onChange={(e) => handleFilterChange('sortBy', e.target.value)}\r\n                                className=\"filter-select\"\r\n                            >\r\n                                <option value=\"newest\">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>\r\n                                <option value=\"price_asc\">–¶–µ–Ω–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>\r\n                                <option value=\"price_desc\">–¶–µ–Ω–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é</option>\r\n                                <option value=\"name_asc\">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>\r\n                                <option value=\"name_desc\">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ */}\r\n                    {characteristics.length > 0 && (\r\n                        <div className=\"characteristics-section\">\r\n                            <h4 className=\"characteristics-title\">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>\r\n                            <div className=\"characteristics-grid\">\r\n                                {characteristics.map(char => (\r\n                                    <div key={char.title} className=\"characteristic-group\">\r\n                                        <label className=\"characteristic-label\">{char.title}</label>\r\n                                        <div className=\"characteristic-values\">\r\n                                            {char.values.map(value => (\r\n                                                <label key={value} className=\"characteristic-value\">\r\n                                                    <input\r\n                                                        type=\"checkbox\"\r\n                                                        checked={filters.characteristics[char.title]?.includes(value) || false}\r\n                                                        onChange={(e) => handleCharacteristicChange(char.title, value, e.target.checked)}\r\n                                                        className=\"characteristic-checkbox\"\r\n                                                    />\r\n                                                    <span className=\"characteristic-text\">{value}</span>\r\n                                                </label>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ */}\r\n                    <div className=\"filter-actions-full\">\r\n                        <button\r\n                            onClick={applyFilters}\r\n                            className=\"apply-filters-button\"\r\n                            disabled={isSearching || Object.keys(errors).length > 0}\r\n                        >\r\n                            –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–∏—Å–∫–µ */}\r\n            {product.hasActiveSearch && (\r\n                <div className=\"search-results-info\">\r\n                    <div className=\"results-main\">\r\n                        <div className=\"results-count\">\r\n                            –ù–∞–π–¥–µ–Ω–æ: <strong>{product.totalCount}</strong> —Ç–æ–≤–∞—Ä–æ–≤\r\n                        </div>\r\n                        <div className=\"search-context\">\r\n                            –≤ <strong>{product.selectedCity}</strong>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"search-query\">\r\n                        –ü–æ –∑–∞–ø—Ä–æ—Å—É: \"<strong>{product.currentSearchQuery}</strong>\"\r\n                    </div>\r\n                    {hasActiveFilters && (\r\n                        <div className=\"active-filters\">\r\n                            {filters.categoryId && (\r\n                                <span className=\"active-filter\">\r\n                                    –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {categories.find(c => c.id == filters.categoryId)?.name}\r\n                                    <button \r\n                                        onClick={() => handleFilterChange('categoryId', '')}\r\n                                        className=\"active-filter-remove\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                </span>\r\n                            )}\r\n                            {filters.minPrice && (\r\n                                <span className=\"active-filter\">\r\n                                    –û—Ç {filters.minPrice}‚ÇΩ\r\n                                    <button \r\n                                        onClick={() => handleFilterChange('minPrice', '')}\r\n                                        className=\"active-filter-remove\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                </span>\r\n                            )}\r\n                            {filters.maxPrice && (\r\n                                <span className=\"active-filter\">\r\n                                    –î–æ {filters.maxPrice}‚ÇΩ\r\n                                    <button \r\n                                        onClick={() => handleFilterChange('maxPrice', '')}\r\n                                        className=\"active-filter-remove\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                </span>\r\n                            )}\r\n                            {filters.sortBy !== 'newest' && (\r\n                                <span className=\"active-filter\">\r\n                                    {filters.sortBy === 'price_asc' && '–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã'}\r\n                                    {filters.sortBy === 'price_desc' && '–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã'}\r\n                                    {filters.sortBy === 'name_asc' && '–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)'}\r\n                                    {filters.sortBy === 'name_desc' && '–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)'}\r\n                                    <button \r\n                                        onClick={() => handleFilterChange('sortBy', 'newest')}\r\n                                        className=\"active-filter-remove\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                </span>\r\n                            )}\r\n                            {hasActiveCharacteristics && Object.entries(filters.characteristics).map(([title, values]) => (\r\n                                <span key={title} className=\"active-filter\">\r\n                                    {title}: {values.join(', ')}\r\n                                    <button \r\n                                        onClick={() => clearCharacteristic(title)}\r\n                                        className=\"active-filter-remove\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                    <button \r\n                        onClick={clearSearch}\r\n                        className=\"clear-search-link\"\r\n                    >\r\n                        –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∏—Å–∫\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            {/* –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ –≤—ã–±—Ä–∞–Ω */}\r\n            {!product.selectedCity && (\r\n                <div className=\"no-city-message\">\r\n                    <div className=\"no-city-icon\">üìç</div>\r\n                    <div className=\"no-city-text\">\r\n                        <strong>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –≤—ã—à–µ</strong> –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default SearchBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}