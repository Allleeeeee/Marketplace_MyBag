{"ast":null,"code":"var _jsxFileName = \"D:\\\\nkurs\\\\client\\\\src\\\\components\\\\FiltersSidebar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport '../css/components/SearchBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FiltersSidebar = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    product\n  } = useContext(Context);\n  const [categories, setCategories] = useState([]);\n  const [characteristics, setCharacteristics] = useState([]);\n  const [filters, setFilters] = useState({\n    minPrice: '',\n    maxPrice: '',\n    sortBy: 'newest',\n    categoryId: '',\n    characteristics: {},\n    excludeNoPrice: false\n  });\n  const [errors, setErrors] = useState({});\n  const [isApplying, setIsApplying] = useState(false);\n  useEffect(() => {\n    loadCategories();\n    if (product.currentFilters) {\n      setFilters(product.currentFilters);\n    }\n  }, []);\n  const loadCategories = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/prod/types');\n      if (response.ok) {\n        const data = await response.json();\n        setCategories(data);\n      }\n    } catch (error) {\n      console.error('Ошибка при загрузке категорий:', error);\n    }\n  };\n  useEffect(() => {\n    if (filters.categoryId) {\n      loadCharacteristics(filters.categoryId);\n    } else {\n      setCharacteristics([]);\n    }\n  }, [filters.categoryId]);\n  const loadCharacteristics = async categoryId => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\n      if (response.ok) {\n        const data = await response.json();\n        const products = data.rows || data;\n        const uniqueCharacteristics = {};\n        products.forEach(product => {\n          if (product.info && Array.isArray(product.info)) {\n            product.info.forEach(info => {\n              if (!uniqueCharacteristics[info.title]) {\n                uniqueCharacteristics[info.title] = new Set();\n              }\n              uniqueCharacteristics[info.title].add(info.description);\n            });\n          }\n        });\n        const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\n          title,\n          values: Array.from(values)\n        }));\n        setCharacteristics(charArray);\n      }\n    } catch (error) {\n      console.error('Ошибка при загрузке характеристик:', error);\n    }\n  };\n  const validateFilters = () => {\n    const newErrors = {};\n    if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\n      newErrors.minPrice = 'Минимальная цена должна быть положительным числом';\n    }\n    if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\n      newErrors.maxPrice = 'Максимальная цена должна быть положительным числом';\n    }\n    if (filters.minPrice && filters.maxPrice) {\n      const min = parseFloat(filters.minPrice);\n      const max = parseFloat(filters.maxPrice);\n      if (min > max) {\n        newErrors.priceRange = 'Минимальная цена не может быть больше максимальной';\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const clearFilters = async () => {\n    const clearedFilters = {\n      minPrice: '',\n      maxPrice: '',\n      sortBy: 'newest',\n      categoryId: '',\n      characteristics: {},\n      excludeNoPrice: false\n    };\n    setFilters(clearedFilters);\n    setErrors({});\n    setCharacteristics([]);\n    setIsApplying(true);\n    try {\n      product.setCurrentFilters(clearedFilters);\n      if (product.currentSearchQuery) {\n        await product.searchProducts(product.currentSearchQuery, clearedFilters);\n      } else {\n        await product.fetchProducts(clearedFilters);\n      }\n    } catch (error) {\n      console.error('Ошибка при сбросе фильтров:', error);\n    } finally {\n      setIsApplying(false);\n    }\n  };\n  const clearError = fieldName => {\n    setErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[fieldName];\n      return newErrors;\n    });\n  };\n  const handleFilterChange = (filterType, value) => {\n    const newFilters = {\n      ...filters,\n      [filterType]: value\n    };\n    setFilters(newFilters);\n    if (errors[filterType]) {\n      clearError(filterType);\n    }\n    if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\n      clearError('priceRange');\n    }\n    validateFilters();\n  };\n  const handleCharacteristicChange = (charTitle, charValue, checked) => {\n    const newCharacteristics = {\n      ...filters.characteristics\n    };\n    if (checked) {\n      if (!newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = [];\n      }\n      if (!newCharacteristics[charTitle].includes(charValue)) {\n        newCharacteristics[charTitle].push(charValue);\n      }\n    } else {\n      if (newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\n        if (newCharacteristics[charTitle].length === 0) {\n          delete newCharacteristics[charTitle];\n        }\n      }\n    }\n    const newFilters = {\n      ...filters,\n      characteristics: newCharacteristics\n    };\n    setFilters(newFilters);\n    validateFilters();\n  };\n  const applyFilters = async () => {\n    if (!validateFilters()) {\n      return;\n    }\n    setIsApplying(true);\n    try {\n      product.setCurrentFilters(filters);\n      if (product.currentSearchQuery) {\n        await product.searchProducts(product.currentSearchQuery, filters);\n      } else {\n        await product.fetchProducts(filters);\n      }\n    } catch (error) {\n      console.error('Ошибка при применении фильтров:', error);\n    } finally {\n      setIsApplying(false);\n    }\n  };\n  useEffect(() => {\n    if (filters.categoryId && product.currentFilters && product.currentFilters.characteristics) {\n      setFilters(prev => ({\n        ...prev,\n        characteristics: product.currentFilters.characteristics\n      }));\n    }\n  }, [filters.categoryId, product.currentFilters]);\n  const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || filters.categoryId || Object.keys(filters.characteristics).length > 0 || filters.excludeNoPrice;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filters-sidebar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"filters-title\",\n        children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearFilters,\n        className: \"clear-filters-button\",\n        disabled: isApplying,\n        children: isApplying ? '...' : 'Сбросить'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }, this), errors.priceRange && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-error general-error\",\n      children: [\"\\u26A0\\uFE0F \", errors.priceRange]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-vertical\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.categoryId,\n          onChange: e => handleFilterChange('categoryId', e.target.value),\n          className: \"filter-select\",\n          disabled: isApplying,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: category.id,\n            children: category.name\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-checkbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.excludeNoPrice,\n            onChange: e => handleFilterChange('excludeNoPrice', e.target.checked),\n            className: \"checkbox-input\",\n            disabled: isApplying\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"checkbox-text\",\n            children: \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \\u0441 \\u0446\\u0435\\u043D\\u043E\\u0439\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u0426\\u0435\\u043D\\u0430, $\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-inputs-vertical\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.minPrice,\n              onChange: e => handleFilterChange('minPrice', e.target.value),\n              placeholder: \"\\u041E\\u0442\",\n              className: `price-input ${errors.minPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\",\n              disabled: isApplying\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.maxPrice,\n              onChange: e => handleFilterChange('maxPrice', e.target.value),\n              placeholder: \"\\u0414\\u043E\",\n              className: `price-input ${errors.maxPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\",\n              disabled: isApplying\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this), errors.minPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-error\",\n          children: [\"\\u26A0\\uFE0F \", errors.minPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }, this), errors.maxPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-error\",\n          children: [\"\\u26A0\\uFE0F \", errors.maxPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.sortBy,\n          onChange: e => handleFilterChange('sortBy', e.target.value),\n          className: \"filter-select\",\n          disabled: isApplying,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"newest\",\n            children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043D\\u043E\\u0432\\u044B\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"price_asc\",\n            children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0432\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"price_desc\",\n            children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0443\\u0431\\u044B\\u0432\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"name_asc\",\n            children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u0410-\\u042F)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"name_desc\",\n            children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u042F-\\u0410)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this), characteristics.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"characteristics-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"characteristics-title\",\n          children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"characteristics-vertical\",\n          children: characteristics.map(char => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"characteristic-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"characteristic-label\",\n              children: char.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"characteristic-values\",\n              children: char.values.map(value => {\n                var _filters$characterist;\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"characteristic-value\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: ((_filters$characterist = filters.characteristics[char.title]) === null || _filters$characterist === void 0 ? void 0 : _filters$characterist.includes(value)) || false,\n                    onChange: e => handleCharacteristicChange(char.title, value, e.target.checked),\n                    className: \"characteristic-checkbox\",\n                    disabled: isApplying\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"characteristic-text\",\n                    children: value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 49\n                  }, this)]\n                }, value, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 45\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 37\n            }, this)]\n          }, char.title, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyFilters,\n          className: \"apply-filters-button\",\n          disabled: isApplying || Object.keys(errors).length > 0,\n          children: isApplying ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"apply-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this) : 'Применить фильтры'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 9\n  }, this);\n}, \"igDLmyUvtLy+3gGcQzWRbLehtig=\")), \"igDLmyUvtLy+3gGcQzWRbLehtig=\");\n_c2 = FiltersSidebar;\nexport default FiltersSidebar;\nvar _c, _c2;\n$RefreshReg$(_c, \"FiltersSidebar$observer\");\n$RefreshReg$(_c2, \"FiltersSidebar\");","map":{"version":3,"names":["React","useState","useContext","useEffect","observer","Context","jsxDEV","_jsxDEV","FiltersSidebar","_s","_c","product","categories","setCategories","characteristics","setCharacteristics","filters","setFilters","minPrice","maxPrice","sortBy","categoryId","excludeNoPrice","errors","setErrors","isApplying","setIsApplying","loadCategories","currentFilters","response","fetch","ok","data","json","error","console","loadCharacteristics","products","rows","uniqueCharacteristics","forEach","info","Array","isArray","title","Set","add","description","charArray","Object","entries","map","values","from","validateFilters","newErrors","isNaN","parseFloat","min","max","priceRange","keys","length","clearFilters","clearedFilters","setCurrentFilters","currentSearchQuery","searchProducts","fetchProducts","clearError","fieldName","prev","handleFilterChange","filterType","value","newFilters","handleCharacteristicChange","charTitle","charValue","checked","newCharacteristics","includes","push","filter","v","applyFilters","hasActiveFilters","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onChange","e","target","category","id","name","type","placeholder","step","char","_filters$characterist","_c2","$RefreshReg$"],"sources":["D:/nkurs/client/src/components/FiltersSidebar.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Context } from '../index';\r\nimport '../css/components/SearchBar.css';\r\n\r\nconst FiltersSidebar = observer(() => {\r\n    const { product } = useContext(Context);\r\n    const [categories, setCategories] = useState([]);\r\n    const [characteristics, setCharacteristics] = useState([]);\r\n    const [filters, setFilters] = useState({\r\n        minPrice: '',\r\n        maxPrice: '',\r\n        sortBy: 'newest',\r\n        categoryId: '',\r\n        characteristics: {},\r\n        excludeNoPrice: false\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [isApplying, setIsApplying] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        if (product.currentFilters) {\r\n            setFilters(product.currentFilters);\r\n        }\r\n    }, []);\r\n\r\n    const loadCategories = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/prod/types');\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCategories(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при загрузке категорий:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (filters.categoryId) {\r\n            loadCharacteristics(filters.categoryId);\r\n        } else {\r\n            setCharacteristics([]);\r\n        }\r\n    }, [filters.categoryId]);\r\n\r\n    const loadCharacteristics = async (categoryId) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                const products = data.rows || data;\r\n                \r\n                const uniqueCharacteristics = {};\r\n                products.forEach(product => {\r\n                    if (product.info && Array.isArray(product.info)) {\r\n                        product.info.forEach(info => {\r\n                            if (!uniqueCharacteristics[info.title]) {\r\n                                uniqueCharacteristics[info.title] = new Set();\r\n                            }\r\n                            uniqueCharacteristics[info.title].add(info.description);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\r\n                    title,\r\n                    values: Array.from(values)\r\n                }));\r\n\r\n                setCharacteristics(charArray);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при загрузке характеристик:', error);\r\n        }\r\n    };\r\n\r\n    const validateFilters = () => {\r\n        const newErrors = {};\r\n\r\n        if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\r\n            newErrors.minPrice = 'Минимальная цена должна быть положительным числом';\r\n        }\r\n\r\n        if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\r\n            newErrors.maxPrice = 'Максимальная цена должна быть положительным числом';\r\n        }\r\n\r\n        if (filters.minPrice && filters.maxPrice) {\r\n            const min = parseFloat(filters.minPrice);\r\n            const max = parseFloat(filters.maxPrice);\r\n            if (min > max) {\r\n                newErrors.priceRange = 'Минимальная цена не может быть больше максимальной';\r\n            }\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const clearFilters = async () => {\r\n        const clearedFilters = {\r\n            minPrice: '',\r\n            maxPrice: '',\r\n            sortBy: 'newest',\r\n            categoryId: '',\r\n            characteristics: {},\r\n            excludeNoPrice: false\r\n        };\r\n        \r\n        setFilters(clearedFilters);\r\n        setErrors({});\r\n        setCharacteristics([]);\r\n        \r\n        setIsApplying(true);\r\n        try {\r\n            product.setCurrentFilters(clearedFilters);\r\n            \r\n            if (product.currentSearchQuery) {\r\n                await product.searchProducts(product.currentSearchQuery, clearedFilters);\r\n            } else {\r\n                await product.fetchProducts(clearedFilters);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при сбросе фильтров:', error);\r\n        } finally {\r\n            setIsApplying(false);\r\n        }\r\n    };\r\n\r\n    const clearError = (fieldName) => {\r\n        setErrors(prev => {\r\n            const newErrors = { ...prev };\r\n            delete newErrors[fieldName];\r\n            return newErrors;\r\n        });\r\n    };\r\n\r\n    const handleFilterChange = (filterType, value) => {\r\n        const newFilters = {\r\n            ...filters,\r\n            [filterType]: value\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        if (errors[filterType]) {\r\n            clearError(filterType);\r\n        }\r\n        if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\r\n            clearError('priceRange');\r\n        }\r\n\r\n        validateFilters();\r\n    };\r\n\r\n    const handleCharacteristicChange = (charTitle, charValue, checked) => {\r\n        const newCharacteristics = { ...filters.characteristics };\r\n        \r\n        if (checked) {\r\n            if (!newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = [];\r\n            }\r\n            if (!newCharacteristics[charTitle].includes(charValue)) {\r\n                newCharacteristics[charTitle].push(charValue);\r\n            }\r\n        } else {\r\n            if (newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\r\n                if (newCharacteristics[charTitle].length === 0) {\r\n                    delete newCharacteristics[charTitle];\r\n                }\r\n            }\r\n        }\r\n\r\n        const newFilters = {\r\n            ...filters,\r\n            characteristics: newCharacteristics\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        validateFilters();\r\n    };\r\n\r\n    const applyFilters = async () => {\r\n        if (!validateFilters()) {\r\n            return;\r\n        }\r\n\r\n        setIsApplying(true);\r\n        try {\r\n            product.setCurrentFilters(filters);\r\n            \r\n            if (product.currentSearchQuery) {\r\n                await product.searchProducts(product.currentSearchQuery, filters);\r\n            } else {\r\n                await product.fetchProducts(filters);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при применении фильтров:', error);\r\n        } finally {\r\n            setIsApplying(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (filters.categoryId && product.currentFilters && product.currentFilters.characteristics) {\r\n            setFilters(prev => ({\r\n                ...prev,\r\n                characteristics: product.currentFilters.characteristics\r\n            }));\r\n        }\r\n    }, [filters.categoryId, product.currentFilters]);\r\n\r\n    const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || \r\n                            filters.categoryId || Object.keys(filters.characteristics).length > 0 || filters.excludeNoPrice;\r\n\r\n    return (\r\n        <div className=\"filters-sidebar\">\r\n            <div className=\"filters-header\">\r\n                <h3 className=\"filters-title\">Фильтры</h3>\r\n                {hasActiveFilters && (\r\n                    <button\r\n                        onClick={clearFilters}\r\n                        className=\"clear-filters-button\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        {isApplying ? '...' : 'Сбросить'}\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {errors.priceRange && (\r\n                <div className=\"filter-error general-error\">\r\n                    ⚠️ {errors.priceRange}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"filters-vertical\">\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Категория</label>\r\n                    <select\r\n                        value={filters.categoryId}\r\n                        onChange={(e) => handleFilterChange('categoryId', e.target.value)}\r\n                        className=\"filter-select\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        <option value=\"\">Все категории</option>\r\n                        {categories.map(category => (\r\n                            <option key={category.id} value={category.id}>\r\n                                {category.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-checkbox\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={filters.excludeNoPrice}\r\n                            onChange={(e) => handleFilterChange('excludeNoPrice', e.target.checked)}\r\n                            className=\"checkbox-input\"\r\n                            disabled={isApplying}\r\n                        />\r\n                        <span className=\"checkbox-text\">Только товары с ценой</span>\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Цена, $</label>\r\n                    <div className=\"price-inputs-vertical\">\r\n                        <div className=\"price-input-group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                value={filters.minPrice}\r\n                                onChange={(e) => handleFilterChange('minPrice', e.target.value)}\r\n                                placeholder=\"От\"\r\n                                className={`price-input ${errors.minPrice ? 'error' : ''}`}\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                disabled={isApplying}\r\n                            />\r\n                        </div>\r\n                        <div className=\"price-input-group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                value={filters.maxPrice}\r\n                                onChange={(e) => handleFilterChange('maxPrice', e.target.value)}\r\n                                placeholder=\"До\"\r\n                                className={`price-input ${errors.maxPrice ? 'error' : ''}`}\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                disabled={isApplying}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    {errors.minPrice && (\r\n                        <div className=\"filter-error\">⚠️ {errors.minPrice}</div>\r\n                    )}\r\n                    {errors.maxPrice && (\r\n                        <div className=\"filter-error\">⚠️ {errors.maxPrice}</div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Сортировка</label>\r\n                    <select\r\n                        value={filters.sortBy}\r\n                        onChange={(e) => handleFilterChange('sortBy', e.target.value)}\r\n                        className=\"filter-select\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        <option value=\"newest\">Сначала новые</option>\r\n                        <option value=\"price_asc\">Цена по возрастанию</option>\r\n                        <option value=\"price_desc\">Цена по убыванию</option>\r\n                        <option value=\"name_asc\">По названию (А-Я)</option>\r\n                        <option value=\"name_desc\">По названию (Я-А)</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {characteristics.length > 0 && (\r\n                    <div className=\"characteristics-section\">\r\n                        <h4 className=\"characteristics-title\">Характеристики</h4>\r\n                        <div className=\"characteristics-vertical\">\r\n                            {characteristics.map(char => (\r\n                                <div key={char.title} className=\"characteristic-group\">\r\n                                    <label className=\"characteristic-label\">{char.title}</label>\r\n                                    <div className=\"characteristic-values\">\r\n                                        {char.values.map(value => (\r\n                                            <label key={value} className=\"characteristic-value\">\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={filters.characteristics[char.title]?.includes(value) || false}\r\n                                                    onChange={(e) => handleCharacteristicChange(char.title, value, e.target.checked)}\r\n                                                    className=\"characteristic-checkbox\"\r\n                                                    disabled={isApplying}\r\n                                                />\r\n                                                <span className=\"characteristic-text\">{value}</span>\r\n                                            </label>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"filter-actions\">\r\n                    <button\r\n                        onClick={applyFilters}\r\n                        className=\"apply-filters-button\"\r\n                        disabled={isApplying || Object.keys(errors).length > 0}\r\n                    >\r\n                        {isApplying ? (\r\n                            <div className=\"apply-spinner\"></div>\r\n                        ) : (\r\n                            'Применить фильтры'\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default FiltersSidebar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}