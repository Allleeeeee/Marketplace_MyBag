{"ast":null,"code":"var _jsxFileName = \"D:\\\\nkurs\\\\client\\\\src\\\\components\\\\FiltersSidebar.js\",\n  _s = $RefreshSig$();\n// components/FiltersSidebar.js\nimport React, { useState, useContext, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport '../css/components/SearchBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FiltersSidebar = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    product\n  } = useContext(Context);\n  const [categories, setCategories] = useState([]);\n  const [characteristics, setCharacteristics] = useState([]);\n  const [filters, setFilters] = useState({\n    minPrice: '',\n    maxPrice: '',\n    sortBy: 'newest',\n    categoryId: '',\n    characteristics: {},\n    excludeNoPrice: false\n  });\n  const [errors, setErrors] = useState({});\n  const [isApplying, setIsApplying] = useState(false);\n\n  // Загрузка категорий при монтировании\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  // Загрузка категорий\n  const loadCategories = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/prod/types');\n      if (response.ok) {\n        const data = await response.json();\n        setCategories(data);\n      }\n    } catch (error) {\n      console.error('Ошибка при загрузке категорий:', error);\n    }\n  };\n\n  // Загрузка характеристик для выбранной категории\n  useEffect(() => {\n    if (filters.categoryId) {\n      loadCharacteristics(filters.categoryId);\n    } else {\n      setCharacteristics([]);\n      setFilters(prev => ({\n        ...prev,\n        characteristics: {}\n      }));\n    }\n  }, [filters.categoryId]);\n  const loadCharacteristics = async categoryId => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\n      if (response.ok) {\n        const data = await response.json();\n        const products = data.rows || data;\n        const uniqueCharacteristics = {};\n        products.forEach(product => {\n          if (product.info && Array.isArray(product.info)) {\n            product.info.forEach(info => {\n              if (!uniqueCharacteristics[info.title]) {\n                uniqueCharacteristics[info.title] = new Set();\n              }\n              uniqueCharacteristics[info.title].add(info.description);\n            });\n          }\n        });\n        const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\n          title,\n          values: Array.from(values)\n        }));\n        setCharacteristics(charArray);\n      }\n    } catch (error) {\n      console.error('Ошибка при загрузке характеристик:', error);\n    }\n  };\n\n  // Валидация фильтров\n  const validateFilters = () => {\n    const newErrors = {};\n    if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\n      newErrors.minPrice = 'Минимальная цена должна быть положительным числом';\n    }\n    if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\n      newErrors.maxPrice = 'Максимальная цена должна быть положительным числом';\n    }\n    if (filters.minPrice && filters.maxPrice) {\n      const min = parseFloat(filters.minPrice);\n      const max = parseFloat(filters.maxPrice);\n      if (min > max) {\n        newErrors.priceRange = 'Минимальная цена не может быть больше максимальной';\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Очистка фильтров\n  const clearFilters = async () => {\n    const clearedFilters = {\n      minPrice: '',\n      maxPrice: '',\n      sortBy: 'newest',\n      categoryId: '',\n      characteristics: {},\n      excludeNoPrice: false\n    };\n    setFilters(clearedFilters);\n    setErrors({});\n    setCharacteristics([]);\n    setIsApplying(true);\n    try {\n      if (product.currentSearchQuery) {\n        await product.searchProducts(product.currentSearchQuery, clearedFilters);\n      } else {\n        await product.fetchProducts(clearedFilters);\n      }\n    } catch (error) {\n      console.error('Ошибка при сбросе фильтров:', error);\n    } finally {\n      setIsApplying(false);\n    }\n  };\n\n  // Очистка ошибки\n  const clearError = fieldName => {\n    setErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[fieldName];\n      return newErrors;\n    });\n  };\n\n  // Обработчик изменения фильтров (без автоматического применения)\n  const handleFilterChange = (filterType, value) => {\n    const newFilters = {\n      ...filters,\n      [filterType]: value\n    };\n    setFilters(newFilters);\n\n    // Очищаем ошибки при изменении\n    if (errors[filterType]) {\n      clearError(filterType);\n    }\n    if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\n      clearError('priceRange');\n    }\n\n    // Только валидация, без применения\n    validateFilters();\n  };\n\n  // Обработчик изменения характеристик (без автоматического применения)\n  const handleCharacteristicChange = (charTitle, charValue, checked) => {\n    const newCharacteristics = {\n      ...filters.characteristics\n    };\n    if (checked) {\n      if (!newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = [];\n      }\n      newCharacteristics[charTitle].push(charValue);\n    } else {\n      if (newCharacteristics[charTitle]) {\n        newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\n        if (newCharacteristics[charTitle].length === 0) {\n          delete newCharacteristics[charTitle];\n        }\n      }\n    }\n    const newFilters = {\n      ...filters,\n      characteristics: newCharacteristics\n    };\n    setFilters(newFilters);\n\n    // Только валидация, без применения\n    validateFilters();\n  };\n\n  // Применение фильтров\n  const applyFilters = async () => {\n    if (!validateFilters()) {\n      return;\n    }\n    setIsApplying(true);\n    try {\n      // Подготавливаем фильтры для отправки\n      const filtersToApply = {\n        ...filters,\n        // Преобразуем характеристики в нужный формат\n        characteristics: filters.characteristics\n      };\n      if (product.currentSearchQuery) {\n        await product.searchProducts(product.currentSearchQuery, filtersToApply);\n      } else {\n        await product.fetchProducts(filtersToApply);\n      }\n    } catch (error) {\n      console.error('Ошибка при применении фильтров:', error);\n    } finally {\n      setIsApplying(false);\n    }\n  };\n  const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || filters.categoryId || Object.keys(filters.characteristics).length > 0 || filters.excludeNoPrice;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filters-sidebar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"filters-title\",\n        children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this), hasActiveFilters && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearFilters,\n        className: \"clear-filters-button\",\n        disabled: isApplying,\n        children: isApplying ? '...' : 'Сбросить'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }, this), errors.priceRange && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-error general-error\",\n      children: [\"\\u26A0\\uFE0F \", errors.priceRange]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-vertical\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.categoryId,\n          onChange: e => handleFilterChange('categoryId', e.target.value),\n          className: \"filter-select\",\n          disabled: isApplying,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: category.id,\n            children: category.name\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-checkbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.excludeNoPrice,\n            onChange: e => handleFilterChange('excludeNoPrice', e.target.checked),\n            className: \"checkbox-input\",\n            disabled: isApplying\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"checkbox-text\",\n            children: \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \\u0441 \\u0446\\u0435\\u043D\\u043E\\u0439\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u0426\\u0435\\u043D\\u0430, \\u20BD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-inputs-vertical\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.minPrice,\n              onChange: e => handleFilterChange('minPrice', e.target.value),\n              placeholder: \"\\u041E\\u0442\",\n              className: `price-input ${errors.minPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\",\n              disabled: isApplying\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-input-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: filters.maxPrice,\n              onChange: e => handleFilterChange('maxPrice', e.target.value),\n              placeholder: \"\\u0414\\u043E\",\n              className: `price-input ${errors.maxPrice ? 'error' : ''}`,\n              min: \"0\",\n              step: \"0.01\",\n              disabled: isApplying\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this), errors.minPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-error\",\n          children: [\"\\u26A0\\uFE0F \", errors.minPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 25\n        }, this), errors.maxPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-error\",\n          children: [\"\\u26A0\\uFE0F \", errors.maxPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"filter-label\",\n          children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.sortBy,\n          onChange: e => handleFilterChange('sortBy', e.target.value),\n          className: \"filter-select\",\n          disabled: isApplying,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"newest\",\n            children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043D\\u043E\\u0432\\u044B\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"price_asc\",\n            children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0432\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"price_desc\",\n            children: \"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E \\u0443\\u0431\\u044B\\u0432\\u0430\\u043D\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"name_asc\",\n            children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u0410-\\u042F)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"name_desc\",\n            children: \"\\u041F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E (\\u042F-\\u0410)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }, this), characteristics.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"characteristics-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"characteristics-title\",\n          children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"characteristics-vertical\",\n          children: characteristics.map(char => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"characteristic-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"characteristic-label\",\n              children: char.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"characteristic-values\",\n              children: char.values.map(value => {\n                var _filters$characterist;\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"characteristic-value\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: ((_filters$characterist = filters.characteristics[char.title]) === null || _filters$characterist === void 0 ? void 0 : _filters$characterist.includes(value)) || false,\n                    onChange: e => handleCharacteristicChange(char.title, value, e.target.checked),\n                    className: \"characteristic-checkbox\",\n                    disabled: isApplying\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"characteristic-text\",\n                    children: value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 49\n                  }, this)]\n                }, value, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 45\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 37\n            }, this)]\n          }, char.title, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyFilters,\n          className: \"apply-filters-button\",\n          disabled: isApplying || Object.keys(errors).length > 0,\n          children: isApplying ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"apply-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 29\n          }, this) : 'Применить фильтры'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 9\n  }, this);\n}, \"ybbzs2vEzAWMehD3YO/ueESXUUY=\")), \"ybbzs2vEzAWMehD3YO/ueESXUUY=\");\n_c2 = FiltersSidebar;\nexport default FiltersSidebar;\nvar _c, _c2;\n$RefreshReg$(_c, \"FiltersSidebar$observer\");\n$RefreshReg$(_c2, \"FiltersSidebar\");","map":{"version":3,"names":["React","useState","useContext","useEffect","observer","Context","jsxDEV","_jsxDEV","FiltersSidebar","_s","_c","product","categories","setCategories","characteristics","setCharacteristics","filters","setFilters","minPrice","maxPrice","sortBy","categoryId","excludeNoPrice","errors","setErrors","isApplying","setIsApplying","loadCategories","response","fetch","ok","data","json","error","console","loadCharacteristics","prev","products","rows","uniqueCharacteristics","forEach","info","Array","isArray","title","Set","add","description","charArray","Object","entries","map","values","from","validateFilters","newErrors","isNaN","parseFloat","min","max","priceRange","keys","length","clearFilters","clearedFilters","currentSearchQuery","searchProducts","fetchProducts","clearError","fieldName","handleFilterChange","filterType","value","newFilters","handleCharacteristicChange","charTitle","charValue","checked","newCharacteristics","push","filter","v","applyFilters","filtersToApply","hasActiveFilters","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onChange","e","target","category","id","name","type","placeholder","step","char","_filters$characterist","includes","_c2","$RefreshReg$"],"sources":["D:/nkurs/client/src/components/FiltersSidebar.js"],"sourcesContent":["// components/FiltersSidebar.js\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Context } from '../index';\r\nimport '../css/components/SearchBar.css';\r\n\r\nconst FiltersSidebar = observer(() => {\r\n    const { product } = useContext(Context);\r\n    const [categories, setCategories] = useState([]);\r\n    const [characteristics, setCharacteristics] = useState([]);\r\n    const [filters, setFilters] = useState({\r\n        minPrice: '',\r\n        maxPrice: '',\r\n        sortBy: 'newest',\r\n        categoryId: '',\r\n        characteristics: {},\r\n        excludeNoPrice: false\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [isApplying, setIsApplying] = useState(false);\r\n\r\n    // Загрузка категорий при монтировании\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    // Загрузка категорий\r\n    const loadCategories = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/prod/types');\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCategories(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при загрузке категорий:', error);\r\n        }\r\n    };\r\n\r\n    // Загрузка характеристик для выбранной категории\r\n    useEffect(() => {\r\n        if (filters.categoryId) {\r\n            loadCharacteristics(filters.categoryId);\r\n        } else {\r\n            setCharacteristics([]);\r\n            setFilters(prev => ({ ...prev, characteristics: {} }));\r\n        }\r\n    }, [filters.categoryId]);\r\n\r\n    const loadCharacteristics = async (categoryId) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/prod?typeId=${categoryId}&limit=50`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                const products = data.rows || data;\r\n                \r\n                const uniqueCharacteristics = {};\r\n                products.forEach(product => {\r\n                    if (product.info && Array.isArray(product.info)) {\r\n                        product.info.forEach(info => {\r\n                            if (!uniqueCharacteristics[info.title]) {\r\n                                uniqueCharacteristics[info.title] = new Set();\r\n                            }\r\n                            uniqueCharacteristics[info.title].add(info.description);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                const charArray = Object.entries(uniqueCharacteristics).map(([title, values]) => ({\r\n                    title,\r\n                    values: Array.from(values)\r\n                }));\r\n\r\n                setCharacteristics(charArray);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при загрузке характеристик:', error);\r\n        }\r\n    };\r\n\r\n    // Валидация фильтров\r\n    const validateFilters = () => {\r\n        const newErrors = {};\r\n\r\n        if (filters.minPrice && (isNaN(filters.minPrice) || parseFloat(filters.minPrice) < 0)) {\r\n            newErrors.minPrice = 'Минимальная цена должна быть положительным числом';\r\n        }\r\n\r\n        if (filters.maxPrice && (isNaN(filters.maxPrice) || parseFloat(filters.maxPrice) < 0)) {\r\n            newErrors.maxPrice = 'Максимальная цена должна быть положительным числом';\r\n        }\r\n\r\n        if (filters.minPrice && filters.maxPrice) {\r\n            const min = parseFloat(filters.minPrice);\r\n            const max = parseFloat(filters.maxPrice);\r\n            if (min > max) {\r\n                newErrors.priceRange = 'Минимальная цена не может быть больше максимальной';\r\n            }\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    // Очистка фильтров\r\n    const clearFilters = async () => {\r\n        const clearedFilters = {\r\n            minPrice: '',\r\n            maxPrice: '',\r\n            sortBy: 'newest',\r\n            categoryId: '',\r\n            characteristics: {},\r\n            excludeNoPrice: false\r\n        };\r\n        \r\n        setFilters(clearedFilters);\r\n        setErrors({});\r\n        setCharacteristics([]);\r\n        \r\n        setIsApplying(true);\r\n        try {\r\n            if (product.currentSearchQuery) {\r\n                await product.searchProducts(product.currentSearchQuery, clearedFilters);\r\n            } else {\r\n                await product.fetchProducts(clearedFilters);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при сбросе фильтров:', error);\r\n        } finally {\r\n            setIsApplying(false);\r\n        }\r\n    };\r\n\r\n    // Очистка ошибки\r\n    const clearError = (fieldName) => {\r\n        setErrors(prev => {\r\n            const newErrors = { ...prev };\r\n            delete newErrors[fieldName];\r\n            return newErrors;\r\n        });\r\n    };\r\n\r\n    // Обработчик изменения фильтров (без автоматического применения)\r\n    const handleFilterChange = (filterType, value) => {\r\n        const newFilters = {\r\n            ...filters,\r\n            [filterType]: value\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        // Очищаем ошибки при изменении\r\n        if (errors[filterType]) {\r\n            clearError(filterType);\r\n        }\r\n        if (errors.priceRange && (filterType === 'minPrice' || filterType === 'maxPrice')) {\r\n            clearError('priceRange');\r\n        }\r\n\r\n        // Только валидация, без применения\r\n        validateFilters();\r\n    };\r\n\r\n    // Обработчик изменения характеристик (без автоматического применения)\r\n    const handleCharacteristicChange = (charTitle, charValue, checked) => {\r\n        const newCharacteristics = { ...filters.characteristics };\r\n        \r\n        if (checked) {\r\n            if (!newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = [];\r\n            }\r\n            newCharacteristics[charTitle].push(charValue);\r\n        } else {\r\n            if (newCharacteristics[charTitle]) {\r\n                newCharacteristics[charTitle] = newCharacteristics[charTitle].filter(v => v !== charValue);\r\n                if (newCharacteristics[charTitle].length === 0) {\r\n                    delete newCharacteristics[charTitle];\r\n                }\r\n            }\r\n        }\r\n\r\n        const newFilters = {\r\n            ...filters,\r\n            characteristics: newCharacteristics\r\n        };\r\n        setFilters(newFilters);\r\n\r\n        // Только валидация, без применения\r\n        validateFilters();\r\n    };\r\n\r\n    // Применение фильтров\r\n    const applyFilters = async () => {\r\n        if (!validateFilters()) {\r\n            return;\r\n        }\r\n\r\n        setIsApplying(true);\r\n        try {\r\n            // Подготавливаем фильтры для отправки\r\n            const filtersToApply = {\r\n                ...filters,\r\n                // Преобразуем характеристики в нужный формат\r\n                characteristics: filters.characteristics\r\n            };\r\n\r\n            if (product.currentSearchQuery) {\r\n                await product.searchProducts(product.currentSearchQuery, filtersToApply);\r\n            } else {\r\n                await product.fetchProducts(filtersToApply);\r\n            }\r\n        } catch (error) {\r\n            console.error('Ошибка при применении фильтров:', error);\r\n        } finally {\r\n            setIsApplying(false);\r\n        }\r\n    };\r\n\r\n    const hasActiveFilters = filters.minPrice || filters.maxPrice || filters.sortBy !== 'newest' || \r\n                            filters.categoryId || Object.keys(filters.characteristics).length > 0 || filters.excludeNoPrice;\r\n\r\n    return (\r\n        <div className=\"filters-sidebar\">\r\n            <div className=\"filters-header\">\r\n                <h3 className=\"filters-title\">Фильтры</h3>\r\n                {hasActiveFilters && (\r\n                    <button\r\n                        onClick={clearFilters}\r\n                        className=\"clear-filters-button\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        {isApplying ? '...' : 'Сбросить'}\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {errors.priceRange && (\r\n                <div className=\"filter-error general-error\">\r\n                    ⚠️ {errors.priceRange}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"filters-vertical\">\r\n                {/* Фильтр по категории */}\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Категория</label>\r\n                    <select\r\n                        value={filters.categoryId}\r\n                        onChange={(e) => handleFilterChange('categoryId', e.target.value)}\r\n                        className=\"filter-select\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        <option value=\"\">Все категории</option>\r\n                        {categories.map(category => (\r\n                            <option key={category.id} value={category.id}>\r\n                                {category.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Чекбокс \"Только товары с ценой\" */}\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-checkbox\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={filters.excludeNoPrice}\r\n                            onChange={(e) => handleFilterChange('excludeNoPrice', e.target.checked)}\r\n                            className=\"checkbox-input\"\r\n                            disabled={isApplying}\r\n                        />\r\n                        <span className=\"checkbox-text\">Только товары с ценой</span>\r\n                    </label>\r\n                </div>\r\n\r\n                {/* Фильтр по цене */}\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Цена, ₽</label>\r\n                    <div className=\"price-inputs-vertical\">\r\n                        <div className=\"price-input-group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                value={filters.minPrice}\r\n                                onChange={(e) => handleFilterChange('minPrice', e.target.value)}\r\n                                placeholder=\"От\"\r\n                                className={`price-input ${errors.minPrice ? 'error' : ''}`}\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                disabled={isApplying}\r\n                            />\r\n                        </div>\r\n                        <div className=\"price-input-group\">\r\n                            <input\r\n                                type=\"number\"\r\n                                value={filters.maxPrice}\r\n                                onChange={(e) => handleFilterChange('maxPrice', e.target.value)}\r\n                                placeholder=\"До\"\r\n                                className={`price-input ${errors.maxPrice ? 'error' : ''}`}\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                disabled={isApplying}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    {errors.minPrice && (\r\n                        <div className=\"filter-error\">⚠️ {errors.minPrice}</div>\r\n                    )}\r\n                    {errors.maxPrice && (\r\n                        <div className=\"filter-error\">⚠️ {errors.maxPrice}</div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Сортировка */}\r\n                <div className=\"filter-group\">\r\n                    <label className=\"filter-label\">Сортировка</label>\r\n                    <select\r\n                        value={filters.sortBy}\r\n                        onChange={(e) => handleFilterChange('sortBy', e.target.value)}\r\n                        className=\"filter-select\"\r\n                        disabled={isApplying}\r\n                    >\r\n                        <option value=\"newest\">Сначала новые</option>\r\n                        <option value=\"price_asc\">Цена по возрастанию</option>\r\n                        <option value=\"price_desc\">Цена по убыванию</option>\r\n                        <option value=\"name_asc\">По названию (А-Я)</option>\r\n                        <option value=\"name_desc\">По названию (Я-А)</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Характеристики */}\r\n                {characteristics.length > 0 && (\r\n                    <div className=\"characteristics-section\">\r\n                        <h4 className=\"characteristics-title\">Характеристики</h4>\r\n                        <div className=\"characteristics-vertical\">\r\n                            {characteristics.map(char => (\r\n                                <div key={char.title} className=\"characteristic-group\">\r\n                                    <label className=\"characteristic-label\">{char.title}</label>\r\n                                    <div className=\"characteristic-values\">\r\n                                        {char.values.map(value => (\r\n                                            <label key={value} className=\"characteristic-value\">\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={filters.characteristics[char.title]?.includes(value) || false}\r\n                                                    onChange={(e) => handleCharacteristicChange(char.title, value, e.target.checked)}\r\n                                                    className=\"characteristic-checkbox\"\r\n                                                    disabled={isApplying}\r\n                                                />\r\n                                                <span className=\"characteristic-text\">{value}</span>\r\n                                            </label>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Кнопка применения фильтров */}\r\n                <div className=\"filter-actions\">\r\n                    <button\r\n                        onClick={applyFilters}\r\n                        className=\"apply-filters-button\"\r\n                        disabled={isApplying || Object.keys(errors).length > 0}\r\n                    >\r\n                        {isApplying ? (\r\n                            <div className=\"apply-spinner\"></div>\r\n                        ) : (\r\n                            'Применить фильтры'\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default FiltersSidebar;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,OAAO,QAAQ,UAAU;AAClC,OAAO,iCAAiC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,MAAMC,cAAc,GAAAC,EAAA,CAAGL,QAAQ,CAAAM,EAAA,GAAAD,EAAA,CAAC,MAAM;EAAAA,EAAA;EAClC,MAAM;IAAEE;EAAQ,CAAC,GAAGT,UAAU,CAACG,OAAO,CAAC;EACvC,MAAM,CAACO,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACa,eAAe,EAAEC,kBAAkB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC;IACnCiB,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,QAAQ;IAChBC,UAAU,EAAE,EAAE;IACdP,eAAe,EAAE,CAAC,CAAC;IACnBQ,cAAc,EAAE;EACpB,CAAC,CAAC;EACF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACAE,SAAS,CAAC,MAAM;IACZwB,cAAc,CAAC,CAAC;EACpB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMA,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsC,CAAC;MACpE,IAAID,QAAQ,CAACE,EAAE,EAAE;QACb,MAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;QAClCnB,aAAa,CAACkB,IAAI,CAAC;MACvB;IACJ,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IAC1D;EACJ,CAAC;;EAED;EACA9B,SAAS,CAAC,MAAM;IACZ,IAAIa,OAAO,CAACK,UAAU,EAAE;MACpBc,mBAAmB,CAACnB,OAAO,CAACK,UAAU,CAAC;IAC3C,CAAC,MAAM;MACHN,kBAAkB,CAAC,EAAE,CAAC;MACtBE,UAAU,CAACmB,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAEtB,eAAe,EAAE,CAAC;MAAE,CAAC,CAAC,CAAC;IAC1D;EACJ,CAAC,EAAE,CAACE,OAAO,CAACK,UAAU,CAAC,CAAC;EAExB,MAAMc,mBAAmB,GAAG,MAAOd,UAAU,IAAK;IAC9C,IAAI;MACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,yCAAyCR,UAAU,WAAW,CAAC;MAC5F,IAAIO,QAAQ,CAACE,EAAE,EAAE;QACb,MAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;QAClC,MAAMK,QAAQ,GAAGN,IAAI,CAACO,IAAI,IAAIP,IAAI;QAElC,MAAMQ,qBAAqB,GAAG,CAAC,CAAC;QAChCF,QAAQ,CAACG,OAAO,CAAC7B,OAAO,IAAI;UACxB,IAAIA,OAAO,CAAC8B,IAAI,IAAIC,KAAK,CAACC,OAAO,CAAChC,OAAO,CAAC8B,IAAI,CAAC,EAAE;YAC7C9B,OAAO,CAAC8B,IAAI,CAACD,OAAO,CAACC,IAAI,IAAI;cACzB,IAAI,CAACF,qBAAqB,CAACE,IAAI,CAACG,KAAK,CAAC,EAAE;gBACpCL,qBAAqB,CAACE,IAAI,CAACG,KAAK,CAAC,GAAG,IAAIC,GAAG,CAAC,CAAC;cACjD;cACAN,qBAAqB,CAACE,IAAI,CAACG,KAAK,CAAC,CAACE,GAAG,CAACL,IAAI,CAACM,WAAW,CAAC;YAC3D,CAAC,CAAC;UACN;QACJ,CAAC,CAAC;QAEF,MAAMC,SAAS,GAAGC,MAAM,CAACC,OAAO,CAACX,qBAAqB,CAAC,CAACY,GAAG,CAAC,CAAC,CAACP,KAAK,EAAEQ,MAAM,CAAC,MAAM;UAC9ER,KAAK;UACLQ,MAAM,EAAEV,KAAK,CAACW,IAAI,CAACD,MAAM;QAC7B,CAAC,CAAC,CAAC;QAEHrC,kBAAkB,CAACiC,SAAS,CAAC;MACjC;IACJ,CAAC,CAAC,OAAOf,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;IAC9D;EACJ,CAAC;;EAED;EACA,MAAMqB,eAAe,GAAGA,CAAA,KAAM;IAC1B,MAAMC,SAAS,GAAG,CAAC,CAAC;IAEpB,IAAIvC,OAAO,CAACE,QAAQ,KAAKsC,KAAK,CAACxC,OAAO,CAACE,QAAQ,CAAC,IAAIuC,UAAU,CAACzC,OAAO,CAACE,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;MACnFqC,SAAS,CAACrC,QAAQ,GAAG,mDAAmD;IAC5E;IAEA,IAAIF,OAAO,CAACG,QAAQ,KAAKqC,KAAK,CAACxC,OAAO,CAACG,QAAQ,CAAC,IAAIsC,UAAU,CAACzC,OAAO,CAACG,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;MACnFoC,SAAS,CAACpC,QAAQ,GAAG,oDAAoD;IAC7E;IAEA,IAAIH,OAAO,CAACE,QAAQ,IAAIF,OAAO,CAACG,QAAQ,EAAE;MACtC,MAAMuC,GAAG,GAAGD,UAAU,CAACzC,OAAO,CAACE,QAAQ,CAAC;MACxC,MAAMyC,GAAG,GAAGF,UAAU,CAACzC,OAAO,CAACG,QAAQ,CAAC;MACxC,IAAIuC,GAAG,GAAGC,GAAG,EAAE;QACXJ,SAAS,CAACK,UAAU,GAAG,oDAAoD;MAC/E;IACJ;IAEApC,SAAS,CAAC+B,SAAS,CAAC;IACpB,OAAON,MAAM,CAACY,IAAI,CAACN,SAAS,CAAC,CAACO,MAAM,KAAK,CAAC;EAC9C,CAAC;;EAED;EACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,cAAc,GAAG;MACnB9C,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,EAAE;MACdP,eAAe,EAAE,CAAC,CAAC;MACnBQ,cAAc,EAAE;IACpB,CAAC;IAEDL,UAAU,CAAC+C,cAAc,CAAC;IAC1BxC,SAAS,CAAC,CAAC,CAAC,CAAC;IACbT,kBAAkB,CAAC,EAAE,CAAC;IAEtBW,aAAa,CAAC,IAAI,CAAC;IACnB,IAAI;MACA,IAAIf,OAAO,CAACsD,kBAAkB,EAAE;QAC5B,MAAMtD,OAAO,CAACuD,cAAc,CAACvD,OAAO,CAACsD,kBAAkB,EAAED,cAAc,CAAC;MAC5E,CAAC,MAAM;QACH,MAAMrD,OAAO,CAACwD,aAAa,CAACH,cAAc,CAAC;MAC/C;IACJ,CAAC,CAAC,OAAO/B,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACvD,CAAC,SAAS;MACNP,aAAa,CAAC,KAAK,CAAC;IACxB;EACJ,CAAC;;EAED;EACA,MAAM0C,UAAU,GAAIC,SAAS,IAAK;IAC9B7C,SAAS,CAACY,IAAI,IAAI;MACd,MAAMmB,SAAS,GAAG;QAAE,GAAGnB;MAAK,CAAC;MAC7B,OAAOmB,SAAS,CAACc,SAAS,CAAC;MAC3B,OAAOd,SAAS;IACpB,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMe,kBAAkB,GAAGA,CAACC,UAAU,EAAEC,KAAK,KAAK;IAC9C,MAAMC,UAAU,GAAG;MACf,GAAGzD,OAAO;MACV,CAACuD,UAAU,GAAGC;IAClB,CAAC;IACDvD,UAAU,CAACwD,UAAU,CAAC;;IAEtB;IACA,IAAIlD,MAAM,CAACgD,UAAU,CAAC,EAAE;MACpBH,UAAU,CAACG,UAAU,CAAC;IAC1B;IACA,IAAIhD,MAAM,CAACqC,UAAU,KAAKW,UAAU,KAAK,UAAU,IAAIA,UAAU,KAAK,UAAU,CAAC,EAAE;MAC/EH,UAAU,CAAC,YAAY,CAAC;IAC5B;;IAEA;IACAd,eAAe,CAAC,CAAC;EACrB,CAAC;;EAED;EACA,MAAMoB,0BAA0B,GAAGA,CAACC,SAAS,EAAEC,SAAS,EAAEC,OAAO,KAAK;IAClE,MAAMC,kBAAkB,GAAG;MAAE,GAAG9D,OAAO,CAACF;IAAgB,CAAC;IAEzD,IAAI+D,OAAO,EAAE;MACT,IAAI,CAACC,kBAAkB,CAACH,SAAS,CAAC,EAAE;QAChCG,kBAAkB,CAACH,SAAS,CAAC,GAAG,EAAE;MACtC;MACAG,kBAAkB,CAACH,SAAS,CAAC,CAACI,IAAI,CAACH,SAAS,CAAC;IACjD,CAAC,MAAM;MACH,IAAIE,kBAAkB,CAACH,SAAS,CAAC,EAAE;QAC/BG,kBAAkB,CAACH,SAAS,CAAC,GAAGG,kBAAkB,CAACH,SAAS,CAAC,CAACK,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKL,SAAS,CAAC;QAC1F,IAAIE,kBAAkB,CAACH,SAAS,CAAC,CAACb,MAAM,KAAK,CAAC,EAAE;UAC5C,OAAOgB,kBAAkB,CAACH,SAAS,CAAC;QACxC;MACJ;IACJ;IAEA,MAAMF,UAAU,GAAG;MACf,GAAGzD,OAAO;MACVF,eAAe,EAAEgE;IACrB,CAAC;IACD7D,UAAU,CAACwD,UAAU,CAAC;;IAEtB;IACAnB,eAAe,CAAC,CAAC;EACrB,CAAC;;EAED;EACA,MAAM4B,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI,CAAC5B,eAAe,CAAC,CAAC,EAAE;MACpB;IACJ;IAEA5B,aAAa,CAAC,IAAI,CAAC;IACnB,IAAI;MACA;MACA,MAAMyD,cAAc,GAAG;QACnB,GAAGnE,OAAO;QACV;QACAF,eAAe,EAAEE,OAAO,CAACF;MAC7B,CAAC;MAED,IAAIH,OAAO,CAACsD,kBAAkB,EAAE;QAC5B,MAAMtD,OAAO,CAACuD,cAAc,CAACvD,OAAO,CAACsD,kBAAkB,EAAEkB,cAAc,CAAC;MAC5E,CAAC,MAAM;QACH,MAAMxE,OAAO,CAACwD,aAAa,CAACgB,cAAc,CAAC;MAC/C;IACJ,CAAC,CAAC,OAAOlD,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IAC3D,CAAC,SAAS;MACNP,aAAa,CAAC,KAAK,CAAC;IACxB;EACJ,CAAC;EAED,MAAM0D,gBAAgB,GAAGpE,OAAO,CAACE,QAAQ,IAAIF,OAAO,CAACG,QAAQ,IAAIH,OAAO,CAACI,MAAM,KAAK,QAAQ,IACpEJ,OAAO,CAACK,UAAU,IAAI4B,MAAM,CAACY,IAAI,CAAC7C,OAAO,CAACF,eAAe,CAAC,CAACgD,MAAM,GAAG,CAAC,IAAI9C,OAAO,CAACM,cAAc;EAEvH,oBACIf,OAAA;IAAK8E,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC5B/E,OAAA;MAAK8E,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBAC3B/E,OAAA;QAAI8E,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACzCN,gBAAgB,iBACb7E,OAAA;QACIoF,OAAO,EAAE5B,YAAa;QACtBsB,SAAS,EAAC,sBAAsB;QAChCO,QAAQ,EAAEnE,UAAW;QAAA6D,QAAA,EAEpB7D,UAAU,GAAG,KAAK,GAAG;MAAU;QAAA8D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CACX;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,EAELnE,MAAM,CAACqC,UAAU,iBACdrD,OAAA;MAAK8E,SAAS,EAAC,4BAA4B;MAAAC,QAAA,GAAC,eACrC,EAAC/D,MAAM,CAACqC,UAAU;IAAA;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpB,CACR,eAEDnF,OAAA;MAAK8E,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAE7B/E,OAAA;QAAK8E,SAAS,EAAC,cAAc;QAAAC,QAAA,gBACzB/E,OAAA;UAAO8E,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACjDnF,OAAA;UACIiE,KAAK,EAAExD,OAAO,CAACK,UAAW;UAC1BwE,QAAQ,EAAGC,CAAC,IAAKxB,kBAAkB,CAAC,YAAY,EAAEwB,CAAC,CAACC,MAAM,CAACvB,KAAK,CAAE;UAClEa,SAAS,EAAC,eAAe;UACzBO,QAAQ,EAAEnE,UAAW;UAAA6D,QAAA,gBAErB/E,OAAA;YAAQiE,KAAK,EAAC,EAAE;YAAAc,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,EACtC9E,UAAU,CAACuC,GAAG,CAAC6C,QAAQ,iBACpBzF,OAAA;YAA0BiE,KAAK,EAAEwB,QAAQ,CAACC,EAAG;YAAAX,QAAA,EACxCU,QAAQ,CAACE;UAAI,GADLF,QAAQ,CAACC,EAAE;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEhB,CACX,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGNnF,OAAA;QAAK8E,SAAS,EAAC,cAAc;QAAAC,QAAA,eACzB/E,OAAA;UAAO8E,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9B/E,OAAA;YACI4F,IAAI,EAAC,UAAU;YACftB,OAAO,EAAE7D,OAAO,CAACM,cAAe;YAChCuE,QAAQ,EAAGC,CAAC,IAAKxB,kBAAkB,CAAC,gBAAgB,EAAEwB,CAAC,CAACC,MAAM,CAAClB,OAAO,CAAE;YACxEQ,SAAS,EAAC,gBAAgB;YAC1BO,QAAQ,EAAEnE;UAAW;YAAA8D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACFnF,OAAA;YAAM8E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAqB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC,eAGNnF,OAAA;QAAK8E,SAAS,EAAC,cAAc;QAAAC,QAAA,gBACzB/E,OAAA;UAAO8E,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC/CnF,OAAA;UAAK8E,SAAS,EAAC,uBAAuB;UAAAC,QAAA,gBAClC/E,OAAA;YAAK8E,SAAS,EAAC,mBAAmB;YAAAC,QAAA,eAC9B/E,OAAA;cACI4F,IAAI,EAAC,QAAQ;cACb3B,KAAK,EAAExD,OAAO,CAACE,QAAS;cACxB2E,QAAQ,EAAGC,CAAC,IAAKxB,kBAAkB,CAAC,UAAU,EAAEwB,CAAC,CAACC,MAAM,CAACvB,KAAK,CAAE;cAChE4B,WAAW,EAAC,cAAI;cAChBf,SAAS,EAAE,eAAe9D,MAAM,CAACL,QAAQ,GAAG,OAAO,GAAG,EAAE,EAAG;cAC3DwC,GAAG,EAAC,GAAG;cACP2C,IAAI,EAAC,MAAM;cACXT,QAAQ,EAAEnE;YAAW;cAAA8D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eACNnF,OAAA;YAAK8E,SAAS,EAAC,mBAAmB;YAAAC,QAAA,eAC9B/E,OAAA;cACI4F,IAAI,EAAC,QAAQ;cACb3B,KAAK,EAAExD,OAAO,CAACG,QAAS;cACxB0E,QAAQ,EAAGC,CAAC,IAAKxB,kBAAkB,CAAC,UAAU,EAAEwB,CAAC,CAACC,MAAM,CAACvB,KAAK,CAAE;cAChE4B,WAAW,EAAC,cAAI;cAChBf,SAAS,EAAE,eAAe9D,MAAM,CAACJ,QAAQ,GAAG,OAAO,GAAG,EAAE,EAAG;cAC3DuC,GAAG,EAAC,GAAG;cACP2C,IAAI,EAAC,MAAM;cACXT,QAAQ,EAAEnE;YAAW;cAAA8D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,EACLnE,MAAM,CAACL,QAAQ,iBACZX,OAAA;UAAK8E,SAAS,EAAC,cAAc;UAAAC,QAAA,GAAC,eAAG,EAAC/D,MAAM,CAACL,QAAQ;QAAA;UAAAqE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAC1D,EACAnE,MAAM,CAACJ,QAAQ,iBACZZ,OAAA;UAAK8E,SAAS,EAAC,cAAc;UAAAC,QAAA,GAAC,eAAG,EAAC/D,MAAM,CAACJ,QAAQ;QAAA;UAAAoE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAC1D;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAGNnF,OAAA;QAAK8E,SAAS,EAAC,cAAc;QAAAC,QAAA,gBACzB/E,OAAA;UAAO8E,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAU;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAClDnF,OAAA;UACIiE,KAAK,EAAExD,OAAO,CAACI,MAAO;UACtByE,QAAQ,EAAGC,CAAC,IAAKxB,kBAAkB,CAAC,QAAQ,EAAEwB,CAAC,CAACC,MAAM,CAACvB,KAAK,CAAE;UAC9Da,SAAS,EAAC,eAAe;UACzBO,QAAQ,EAAEnE,UAAW;UAAA6D,QAAA,gBAErB/E,OAAA;YAAQiE,KAAK,EAAC,QAAQ;YAAAc,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC7CnF,OAAA;YAAQiE,KAAK,EAAC,WAAW;YAAAc,QAAA,EAAC;UAAmB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACtDnF,OAAA;YAAQiE,KAAK,EAAC,YAAY;YAAAc,QAAA,EAAC;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACpDnF,OAAA;YAAQiE,KAAK,EAAC,UAAU;YAAAc,QAAA,EAAC;UAAiB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACnDnF,OAAA;YAAQiE,KAAK,EAAC,WAAW;YAAAc,QAAA,EAAC;UAAiB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,EAGL5E,eAAe,CAACgD,MAAM,GAAG,CAAC,iBACvBvD,OAAA;QAAK8E,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACpC/E,OAAA;UAAI8E,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzDnF,OAAA;UAAK8E,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EACpCxE,eAAe,CAACqC,GAAG,CAACmD,IAAI,iBACrB/F,OAAA;YAAsB8E,SAAS,EAAC,sBAAsB;YAAAC,QAAA,gBAClD/E,OAAA;cAAO8E,SAAS,EAAC,sBAAsB;cAAAC,QAAA,EAAEgB,IAAI,CAAC1D;YAAK;cAAA2C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC5DnF,OAAA;cAAK8E,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EACjCgB,IAAI,CAAClD,MAAM,CAACD,GAAG,CAACqB,KAAK;gBAAA,IAAA+B,qBAAA;gBAAA,oBAClBhG,OAAA;kBAAmB8E,SAAS,EAAC,sBAAsB;kBAAAC,QAAA,gBAC/C/E,OAAA;oBACI4F,IAAI,EAAC,UAAU;oBACftB,OAAO,EAAE,EAAA0B,qBAAA,GAAAvF,OAAO,CAACF,eAAe,CAACwF,IAAI,CAAC1D,KAAK,CAAC,cAAA2D,qBAAA,uBAAnCA,qBAAA,CAAqCC,QAAQ,CAAChC,KAAK,CAAC,KAAI,KAAM;oBACvEqB,QAAQ,EAAGC,CAAC,IAAKpB,0BAA0B,CAAC4B,IAAI,CAAC1D,KAAK,EAAE4B,KAAK,EAAEsB,CAAC,CAACC,MAAM,CAAClB,OAAO,CAAE;oBACjFQ,SAAS,EAAC,yBAAyB;oBACnCO,QAAQ,EAAEnE;kBAAW;oBAAA8D,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACxB,CAAC,eACFnF,OAAA;oBAAM8E,SAAS,EAAC,qBAAqB;oBAAAC,QAAA,EAAEd;kBAAK;oBAAAe,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA,GAR5ClB,KAAK;kBAAAe,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OASV,CAAC;cAAA,CACX;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA,GAfAY,IAAI,CAAC1D,KAAK;YAAA2C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAgBf,CACR;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR,eAGDnF,OAAA;QAAK8E,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC3B/E,OAAA;UACIoF,OAAO,EAAET,YAAa;UACtBG,SAAS,EAAC,sBAAsB;UAChCO,QAAQ,EAAEnE,UAAU,IAAIwB,MAAM,CAACY,IAAI,CAACtC,MAAM,CAAC,CAACuC,MAAM,GAAG,CAAE;UAAAwB,QAAA,EAEtD7D,UAAU,gBACPlB,OAAA;YAAK8E,SAAS,EAAC;UAAe;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,GAErC;QACH;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC,kCAAC;AAACe,GAAA,GA/WGjG,cAAc;AAiXpB,eAAeA,cAAc;AAAC,IAAAE,EAAA,EAAA+F,GAAA;AAAAC,YAAA,CAAAhG,EAAA;AAAAgG,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}