{"ast":null,"code":"// store/ProductStore.js\nimport { makeAutoObservable } from 'mobx';\nclass ProductStore {\n  constructor() {\n    this.products = [];\n    this.totalCount = 0;\n    this.limit = 2;\n    this.page = 1;\n    makeAutoObservable(this);\n  }\n  setProducts(products) {\n    this.products = products;\n  }\n  setTotalCount(count) {\n    this.totalCount = count;\n  }\n  setPage(page) {\n    this.page = page;\n  }\n\n  // Убрал стрелочную функцию\n  async fetchProducts() {\n    try {\n      const response = await fetch(`http://localhost:5000/api/prod?page=${this.page}&limit=${this.limit}`);\n      const data = await response.json();\n      this.setProducts(data.rows);\n      this.setTotalCount(data.count);\n    } catch (error) {\n      console.error('Ошибка при получении продуктов:', error);\n    }\n  }\n\n  // Убрал стрелочную функцию\n  async fetchProductsByCity(city) {\n    try {\n      const response = await fetch(`http://localhost:5000/api/prod/city/${city}`);\n      const data = await response.json();\n      this.setProducts(data);\n      this.setTotalCount(data.length);\n    } catch (error) {\n      console.error('Ошибка при получении продуктов по городу:', error);\n    }\n  }\n}\nexport const productStore = new ProductStore();","map":{"version":3,"names":["makeAutoObservable","ProductStore","constructor","products","totalCount","limit","page","setProducts","setTotalCount","count","setPage","fetchProducts","response","fetch","data","json","rows","error","console","fetchProductsByCity","city","length","productStore"],"sources":["D:/nkurs/client/src/store/ProductStore.js"],"sourcesContent":["// store/ProductStore.js\r\nimport { makeAutoObservable } from 'mobx';\r\n\r\nclass ProductStore {\r\n    products = [];\r\n    totalCount = 0;\r\n    limit = 2;\r\n    page = 1;\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    setProducts(products) {\r\n        this.products = products;\r\n    }\r\n\r\n    setTotalCount(count) {\r\n        this.totalCount = count;\r\n    }\r\n\r\n    setPage(page) {\r\n        this.page = page;\r\n    }\r\n\r\n    // Убрал стрелочную функцию\r\n    async fetchProducts() {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/prod?page=${this.page}&limit=${this.limit}`);\r\n            const data = await response.json();\r\n            this.setProducts(data.rows);\r\n            this.setTotalCount(data.count);\r\n        } catch (error) {\r\n            console.error('Ошибка при получении продуктов:', error);\r\n        }\r\n    }\r\n\r\n    // Убрал стрелочную функцию\r\n    async fetchProductsByCity(city) {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/prod/city/${city}`);\r\n            const data = await response.json();\r\n            this.setProducts(data);\r\n            this.setTotalCount(data.length);\r\n        } catch (error) {\r\n            console.error('Ошибка при получении продуктов по городу:', error);\r\n        }\r\n    }\r\n}\r\n\r\nexport const productStore = new ProductStore();"],"mappings":"AAAA;AACA,SAASA,kBAAkB,QAAQ,MAAM;AAEzC,MAAMC,YAAY,CAAC;EAMfC,WAAWA,CAAA,EAAG;IAAA,KALdC,QAAQ,GAAG,EAAE;IAAA,KACbC,UAAU,GAAG,CAAC;IAAA,KACdC,KAAK,GAAG,CAAC;IAAA,KACTC,IAAI,GAAG,CAAC;IAGJN,kBAAkB,CAAC,IAAI,CAAC;EAC5B;EAEAO,WAAWA,CAACJ,QAAQ,EAAE;IAClB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC5B;EAEAK,aAAaA,CAACC,KAAK,EAAE;IACjB,IAAI,CAACL,UAAU,GAAGK,KAAK;EAC3B;EAEAC,OAAOA,CAACJ,IAAI,EAAE;IACV,IAAI,CAACA,IAAI,GAAGA,IAAI;EACpB;;EAEA;EACA,MAAMK,aAAaA,CAAA,EAAG;IAClB,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,uCAAuC,IAAI,CAACP,IAAI,UAAU,IAAI,CAACD,KAAK,EAAE,CAAC;MACpG,MAAMS,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClC,IAAI,CAACR,WAAW,CAACO,IAAI,CAACE,IAAI,CAAC;MAC3B,IAAI,CAACR,aAAa,CAACM,IAAI,CAACL,KAAK,CAAC;IAClC,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IAC3D;EACJ;;EAEA;EACA,MAAME,mBAAmBA,CAACC,IAAI,EAAE;IAC5B,IAAI;MACA,MAAMR,QAAQ,GAAG,MAAMC,KAAK,CAAC,uCAAuCO,IAAI,EAAE,CAAC;MAC3E,MAAMN,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClC,IAAI,CAACR,WAAW,CAACO,IAAI,CAAC;MACtB,IAAI,CAACN,aAAa,CAACM,IAAI,CAACO,MAAM,CAAC;IACnC,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;IACrE;EACJ;AACJ;AAEA,OAAO,MAAMK,YAAY,GAAG,IAAIrB,YAAY,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}